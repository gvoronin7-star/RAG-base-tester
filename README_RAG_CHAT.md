# RAG-—á–∞—Ç: –ë–µ–Ω–≥–∞–ª—å—Å–∫–∏–µ –∫–æ—à–∫–∏

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –æ –±–µ–Ω–≥–∞–ª—å—Å–∫–∏—Ö –∫–æ—à–∫–∞—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ RAG (Retrieval-Augmented Generation) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤.

**–ê–≤—Ç–æ—Ä—ã:** Line_GV, Koda (AI Assistant), –ê–ª–∏—Å–∞ (AI Consultant) ‚Äî —Å–º. [AUTHORS](AUTHORS)

**–í–µ—Ä—Å–∏—è:** 2.5.0 (2026-02-18) ‚Äî Production Release

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ API RAG-—Å–∏—Å—Ç–µ–º—ã. –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞: [README.md](README.md). –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞: [README_INTERACTIVE.md](README_INTERACTIVE.md).

---

## üéâ –ù–æ–≤–æ–µ –≤ v2.5.0 (Production Release)

### ‚úÖ –§–∞–∑–∞ 1 —É–ª—É—á—à–µ–Ω–∏–π:

1. **üñ•Ô∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é —Å –≤—ã–±–æ—Ä–æ–º —Ä–µ–∂–∏–º–æ–≤
2. **üé® –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ colorama –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è
3. **üìö –ò—Å—Ç–æ—Ä–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –ø–æ–∏—Å–∫ –∏ —ç–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏
4. **‚öôÔ∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:

```bash
# –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python rag_chat_interactive.py

# –ò–ª–∏ –±–∞–∑–æ–≤—ã–π CLI
python rag_chat.py
```

## üìã –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é RAG-–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –æ –±–µ–Ω–≥–∞–ª—å—Å–∫–∏—Ö –∫–æ—à–∫–∞—Ö (210 –≤–µ–∫—Ç–æ—Ä–æ–≤ FAISS)
- ‚úÖ –≠–º–±–µ–¥–¥–∏–Ω–≥–∏: `text-embedding-3-small` (1536 —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å)
- ‚úÖ LLM –º–æ–¥–µ–ª—å: `gpt-4o-mini` (–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—é —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ)
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ API (proxyapi.ru)
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –±–ª–∏–∑–æ—Å—Ç–∏
- üÜï **–û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ —á–∞–Ω–∫–æ–≤** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞
- üÜï **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** –ø–æ –ø–æ—Ä–æ–≥—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (threshold)
- üÜï **–ú–æ–¥—É–ª—å RelevanceScorer** –¥–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª

–§–∞–π–ª `.env` —É–∂–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏ API:

```env
PROXI_API_KEY=sk-skkr6B8ho07KFkxG7Qb1M30i4lbToiES
OPENAI_API_BASE=https://openai.api.proxyapi.ru/v1
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏)

```bash
python rag_chat.py
```

### –ó–∞–ø—É—Å–∫ —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ —á–∞–Ω–∫–æ–≤, –∏–∑–º–µ–Ω–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ –∫–æ–¥–µ:

```python
rag_system = RAGChatSystem(use_relevance_scorer=True)
answer = rag_system.ask_with_relevance(
    question="–ö–∞–∫–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä —É –±–µ–Ω–≥–∞–ª–æ–≤?",
    threshold=0.5,
    top_k=3,
    show_scores=True
)
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
python test_rag.py

# –¢–µ—Å—Ç—ã —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
python test_relevance.py

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
python demo_relevance_simple.py

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è RelevanceScorer
python relevance_scorer.py
```

### –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤

- "–ö–∞–∫–æ–≤–∞ –∏—Å—Ç–æ—Ä–∏—è –ø–æ—Ä–æ–¥—ã –±–µ–Ω–≥–∞–ª—å—Å–∫–∏—Ö –∫–æ—à–µ–∫?"
- "–ö–∞–∫–∏–µ –æ–∫—Ä–∞—Å—ã –±—ã–≤–∞—é—Ç —É –±–µ–Ω–≥–∞–ª–æ–≤?"
- "–ö–∞–∫–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä —É –±–µ–Ω–≥–∞–ª—å—Å–∫–∏—Ö –∫–æ—à–µ–∫?"
- "–ö–∞–∫ —É—Ö–∞–∂–∏–≤–∞—Ç—å –∑–∞ –±–µ–Ω–≥–∞–ª—å—Å–∫–æ–π –∫–æ—à–∫–æ–π?"
- "–ß–µ–º –±–µ–Ω–≥–∞–ª—å—Å–∫–∏–µ –∫–æ—à–∫–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ—Ä–æ–¥?"

### –ö–æ–º–∞–Ω–¥—ã –≤—ã—Ö–æ–¥–∞

- –í–≤–µ–¥–∏—Ç–µ `exit`, `quit`, `–≤—ã—Ö–æ–¥` –∏–ª–∏ `q` –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
rag_chat.py
‚îú‚îÄ‚îÄ RAGChatSystem (–∫–ª–∞—Å—Å)
‚îÇ   ‚îú‚îÄ‚îÄ __init__()                      # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ _load_rag_database()            # –ó–∞–≥—Ä—É–∑–∫–∞ FAISS –∏–Ω–¥–µ–∫—Å–∞ –∏ –¥–∞—Ç–∞—Å–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ _create_embedding()             # –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –∑–∞–ø—Ä–æ—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ _search_relevant_chunks()       # –ü–æ–∏—Å–∫ –ø–æ FAISS (–±–∞–∑–æ–≤—ã–π)
‚îÇ   ‚îú‚îÄ‚îÄ _search_relevant_chunks_with_score() # –ü–æ–∏—Å–∫ —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ _build_prompt()                 # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ ask()                           # –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ (–±–∞–∑–æ–≤—ã–π)
‚îÇ   ‚îî‚îÄ‚îÄ ask_with_relevance()            # –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ main()                              # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π CLI

relevance_scorer.py
‚îú‚îÄ‚îÄ RelevanceScorer (–∫–ª–∞—Å—Å)
‚îÇ   ‚îú‚îÄ‚îÄ __init__()                      # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ cosine_similarity()             # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ create_embeddings()             # –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ build_faiss_index()             # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ FAISS –∏–Ω–¥–µ–∫—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ search_relevant_docs()          # –ü–æ–∏—Å–∫ —Å –æ—Ü–µ–Ω–∫–æ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
‚îî‚îÄ‚îÄ demo_usage()                        # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö RAG

- **–¢–∏–ø:** FAISS (Facebook AI Similarity Search)
- **–ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤:** text-embedding-3-small
- **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤:** 1536
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–µ–∫—Ç–æ—Ä–æ–≤:** 210
- **–§–æ—Ä–º–∞—Ç:** index.faiss + dataset.json

### –ú–æ–¥–µ–ª—å LLM

**GPT-4o-mini** ‚Äî –≤—ã–±—Ä–∞–Ω–∞ –∫–∞–∫ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è RAG-–∑–∞–¥–∞—á:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------------|----------|
| –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–∫–Ω–æ | 128K —Ç–æ–∫–µ–Ω–æ–≤ |
| –¶–µ–Ω–∞ (–≤—Ö–æ–¥) | ~$0.15 / 1M —Ç–æ–∫–µ–Ω–æ–≤ |
| –¶–µ–Ω–∞ (–≤—ã—Ö–æ–¥) | ~$0.60 / 1M —Ç–æ–∫–µ–Ω–æ–≤ |
| –ö–∞—á–µ—Å—Ç–≤–æ | –í—ã—Å–æ–∫–æ–µ, —Ö–æ—Ä–æ—à–æ –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç |
| –°–∫–æ—Ä–æ—Å—Ç—å | –ë—ã—Å—Ç—Ä–∞—è |

**–ü–æ—á–µ–º—É GPT-4o-mini:**
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- ‚úÖ –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è RAG-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤

## üîß –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

### –ë–∞–∑–æ–≤—ã–π —Ä–µ–∂–∏–º

1. **–í–≤–æ–¥ –≤–æ–ø—Ä–æ—Å–∞** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å
2. **–≠–º–±–µ–¥–¥–∏–Ω–≥** ‚Üí –í–æ–ø—Ä–æ—Å –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –≤–µ–∫—Ç–æ—Ä (text-embedding-3-small)
3. **–ü–æ–∏—Å–∫** ‚Üí FAISS –Ω–∞—Ö–æ–¥–∏—Ç 5 –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
4. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** ‚Üí –ù–∞–π–¥–µ–Ω–Ω—ã–µ —á–∞–Ω–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
5. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è** ‚Üí GPT-4o-mini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
6. **–í—ã–≤–æ–¥** ‚Üí –û—Ç–≤–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –†–µ–∂–∏–º —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

1. **–í–≤–æ–¥ –≤–æ–ø—Ä–æ—Å–∞** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å
2. **–≠–º–±–µ–¥–¥–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞** ‚Üí –í–æ–ø—Ä–æ—Å –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –≤–µ–∫—Ç–æ—Ä (sentence-transformers)
3. **–ü–æ–∏—Å–∫** ‚Üí FAISS –Ω–∞—Ö–æ–¥–∏—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
4. **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ score** ‚Üí –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–æ–º –∏ –∫–∞–∂–¥—ã–º —á–∞–Ω–∫–æ–º
5. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** ‚Üí –ß–∞–Ω–∫–∏ —Å score < threshold –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è
6. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —É–±—ã–≤–∞–Ω–∏—é score
7. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** ‚Üí –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
8. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è** ‚Üí GPT-4o-mini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
9. **–í—ã–≤–æ–¥** ‚Üí –û—Ç–≤–µ—Ç –∏ –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## üÜï –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

### –ß—Ç–æ —Ç–∞–∫–æ–µ –æ—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏?

**Score (–º–µ—Ä–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏)** ‚Äî —ç—Ç–æ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç 0 –¥–æ 1, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–µ–µ, –Ω–∞—Å–∫–æ–ª—å–∫–æ —á–∞–Ω–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–ø—Ä–æ—Å—É:
- **1.0** ‚Äî –ø–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ —Å–º—ã—Å–ª—É
- **0.5** ‚Äî —Å—Ä–µ–¥–Ω—è—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
- **0.0** ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏

### –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º—É–ª–∞ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞:

```
score = (A ¬∑ B) / (||A|| √ó ||B||)
```

–ì–¥–µ:
- A –∏ B ‚Äî –≤–µ–∫—Ç–æ—Ä—ã —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- ¬∑ ‚Äî —Å–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
- ||...|| ‚Äî –Ω–æ—Ä–º–∞ –≤–µ–∫—Ç–æ—Ä–∞ (–¥–ª–∏–Ω–∞)

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ü–µ–Ω–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|----------------------|
| `threshold` | –ü–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏. –ß–∞–Ω–∫–∏ —Å score < threshold –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è | 0.5 |
| `top_k` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —á–∞–Ω–∫–æ–≤ | 5 |
| `show_scores` | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –≤ –≤—ã–≤–æ–¥–µ | True |

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
from rag_chat import RAGChatSystem

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
rag = RAGChatSystem(use_relevance_scorer=True)

# –í–æ–ø—Ä–æ—Å —Å –≤—ã—Å–æ–∫–∏–º –ø–æ—Ä–æ–≥–æ–º (—Ç–æ–ª—å–∫–æ –æ—á–µ–Ω—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏)
answer = rag.ask_with_relevance(
    question="–ö–∞–∫–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä —É –±–µ–Ω–≥–∞–ª—å—Å–∫–∏—Ö –∫–æ—à–µ–∫?",
    threshold=0.6,      # –¢–æ–ª—å–∫–æ —á–∞–Ω–∫–∏ —Å score >= 0.6
    top_k=3,            # –ú–∞–∫—Å–∏–º—É–º 3 —á–∞–Ω–∫–∞
    show_scores=True    # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ü–µ–Ω–∫–∏
)

# –í–æ–ø—Ä–æ—Å —Å –Ω–∏–∑–∫–∏–º –ø–æ—Ä–æ–≥–æ–º (–±–æ–ª—å—à–µ —á–∞–Ω–∫–æ–≤, –Ω–æ –º–µ–Ω–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ)
answer = rag.ask_with_relevance(
    question="–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —É—Ö–æ–¥–∞ –∑–∞ –±–µ–Ω–≥–∞–ª–∞–º–∏",
    threshold=0.3,      # –ú–µ–Ω—å—à–µ –ø–æ—Ä–æ–≥ ‚Äî –±–æ–ª—å—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    top_k=5
)
```

### –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RelevanceScorer

–ú–æ–¥—É–ª—å `relevance_scorer.py` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ:

```python
from relevance_scorer import RelevanceScorer

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
scorer = RelevanceScorer()

# –î–æ–∫—É–º–µ–Ω—Ç—ã
docs = [
    "–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –º–µ–Ω—è–µ—Ç –º–∏—Ä.",
    "Python ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —è–∑—ã–∫.",
    "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ ‚Äî —á–∞—Å—Ç—å –ò–ò."
]

# –ü–æ–∏—Å–∫
results = scorer.search_relevant_docs(
    query="–ö–∞–∫ Python —Å–≤—è–∑–∞–Ω —Å –ò–ò?",
    docs=docs,
    threshold=0.5,
    k=2
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç: [("Python ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —è–∑—ã–∫.", 0.87), ...]
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
.
‚îú‚îÄ‚îÄ rag_chat.py                   # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç RAG-—Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ relevance_scorer.py           # –ú–æ–¥—É–ª—å –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ test_rag.py                   # –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ test_relevance.py             # –¢–µ—Å—Ç—ã —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ demo_relevance_simple.py      # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ requirements.txt              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ README_RAG_CHAT.md            # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ .env                          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API
‚îî‚îÄ‚îÄ –±–µ–Ω–≥–∞–ª—å—Å–∫–∏–µ –∫–æ—à–∫–∏ RAG/        # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö RAG
    ‚îú‚îÄ‚îÄ index.faiss               # FAISS –∏–Ω–¥–µ–∫—Å
    ‚îú‚îÄ‚îÄ dataset.json              # –ß–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    ‚îú‚îÄ‚îÄ metadata.json             # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    ‚îî‚îÄ‚îÄ README_RAG.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ë–î
```

## ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤)
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π API –∫–ª—é—á –≤ .env —Ñ–∞–π–ª–µ

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–¥–µ–∫—Å–∞ FAISS

```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: No such file or directory
```

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ "–±–µ–Ω–≥–∞–ª—å—Å–∫–∏–µ –∫–æ—à–∫–∏ RAG" –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π.

### –û—à–∏–±–∫–∞ API

```
‚ùå –û—à–∏–±–∫–∞: Incorrect API key provided
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `.env` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `PROXI_API_KEY`.

### –û—à–∏–±–∫–∞ –º–æ–¥—É–ª–µ–π

```
ModuleNotFoundError: No module named 'openai'
```

**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π –≤ —Ä–∞–º–∫–∞—Ö –æ–±—É—á–µ–Ω–∏—è Prompt Engineering 3.0 –æ—Ç Zerocoder.

## üë• –ê–≤—Ç–æ—Ä—ã

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ—Ä–∞—Ö –∏ –≤–∫–ª–∞–¥—á–∏–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª–µ [AUTHORS](AUTHORS).

### –û—Å–Ω–æ–≤–Ω–æ–π –∞–≤—Ç–æ—Ä
- **Line_GV** ‚Äî –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
- Telegram: [@Line_GV](https://t.me/Line_GV)

### –°–æ–∞–≤—Ç–æ—Ä—ã
- **Koda (AI Assistant)** ‚Äî –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥—É–ª—è –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  - –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ threshold
  - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å —Ü–≤–µ—Ç–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
  - –ù–∞–ø–∏—Å–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–æ–≤

- **–ê–ª–∏—Å–∞ (AI Consultant)** ‚Äî –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏, –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º –∏ –ø—Ä–æ–º—Ç–∏–Ω–≥—É
  - –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ RAG
  - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
  - –ü–æ–º–æ—â—å –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è LLM
  - –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É –º–µ—Ç—Ä–∏–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –í–∫–ª–∞–¥
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ RAG-—Å–∏—Å—Ç–µ–º—ã –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –±–µ–Ω–≥–∞–ª—å—Å–∫–∏—Ö –∫–æ—à–∫–∞—Ö
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö FAISS (210 –≤–µ–∫—Ç–æ—Ä–æ–≤)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ API (proxyapi.ru)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ GPT-4o-mini –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ —á–∞–Ω–∫–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ù–∞–ø–∏—Å–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–æ–≤
